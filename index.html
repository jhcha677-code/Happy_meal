<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Meal Plan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #fffafb; }
        .calendar-day { background-color: white; min-height: 110px; padding: 10px; transition: all 0.2s; cursor: pointer; border: 0.5px solid #fdf2f2; }
        .calendar-day:hover { background-color: #fff5f5; z-index: 10; transform: translateY(-2px); box-shadow: 0 4px 12px -2px rgb(255 182 193 / 0.3); }
        .calendar-day.active { border: 2px solid #ff8fa3; background-color: #fff0f3; }
        .calendar-day.today { background-color: #fff5f5; border: 1.5px solid #ffb3c1; }
        .menu-label { font-size: 11px; font-weight: 500; margin-top: 6px; color: #c9184a; line-height: 1.3; }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-7xl mx-auto">
        <header class="mb-10 text-center">
            <h1 class="text-5xl font-black text-pink-600 mb-3 tracking-tighter">âœ¨ Happy Meal Plan</h1>
            <p class="text-gray-500 text-lg font-medium">í–‰ë³µí•œ ìš°ë¦¬ ê°€ì¡±ì„ ìœ„í•œ ë§›ìˆëŠ” ì œì²  ì‹ë‹¨ ê°€ì´ë“œ</p>
        </header>

        <!-- ì„¤ì •ë°”: í…Œë§ˆ ì„ íƒ ê¸°ëŠ¥ ì‚­ì œ -->
        <div class="bg-white p-6 rounded-3xl shadow-sm mb-10 flex flex-wrap gap-8 items-center justify-between border border-pink-50">
            <div class="flex flex-wrap gap-6">
                <div class="space-y-1">
                    <label class="block text-xs font-bold text-pink-300 uppercase tracking-wider">ê°€ì¡± ì¸ì›ìˆ˜</label>
                    <select id="person-option" class="bg-pink-50 border-none rounded-xl px-4 py-2 text-pink-700 font-bold focus:ring-2 focus:ring-pink-300 transition" onchange="updateRecipeIfSelected()">
                        <option value="1">ë‚˜í™€ë¡œ ëƒ ëƒ  (1ì¸)</option>
                        <option value="2">ì•Œì½©ë‹¬ì½© (2ì¸)</option>
                        <option value="4" selected>í–‰ë³µê°€ë“ (4ì¸)</option>
                    </select>
                </div>
            </div>
            <button onclick="refreshSeedAndRender()" class="bg-gradient-to-r from-pink-500 to-rose-400 hover:from-pink-600 hover:to-rose-500 text-white font-black px-8 py-3 rounded-2xl transition shadow-lg shadow-pink-100 flex items-center gap-2">
                ğŸ¨ ìƒˆë¡œìš´ ì‹ë‹¨ ì§œê¸°
            </button>
        </div>

        <div class="grid grid-cols-1 xl:grid-cols-12 gap-10">
            <div class="xl:col-span-7 bg-white p-8 rounded-[2.5rem] shadow-sm border border-pink-50">
                <div class="flex justify-between items-center mb-8">
                    <button id="prev-month" class="p-3 hover:bg-pink-50 rounded-2xl transition"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-pink-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
                    <h2 id="calendar-title" class="text-3xl font-black text-gray-800"></h2>
                    <button id="next-month" class="p-3 hover:bg-pink-50 rounded-2xl transition"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-pink-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                </div>
                <div class="grid grid-cols-7 text-center text-[10px] font-black text-pink-200 mb-4 tracking-[0.2em] uppercase">
                    <div class="text-rose-400">Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div class="text-pink-400">Sat</div>
                </div>
                <div id="calendar-body" class="grid grid-cols-7 gap-3"></div>
            </div>

            <div id="recipe-detail" class="xl:col-span-5">
                <div id="recipe-content-placeholder" class="bg-white border-2 border-dashed border-pink-100 rounded-[2.5rem] p-12 flex flex-col items-center justify-center text-center h-full">
                    <div class="text-5xl mb-6">ğŸ˜‹</div>
                    <h3 class="text-xl font-bold text-pink-300 mb-2">ë¬´ìŠ¨ ìš”ë¦¬ë¥¼ í•´ë³¼ê¹Œìš”?</h3>
                    <p class="text-pink-200 text-sm font-medium">ë‚ ì§œë¥¼ í´ë¦­í•´ í–‰ë³µí•œ ì‹íƒì„ ì¤€ë¹„í•˜ì„¸ìš”</p>
                </div>
                <div id="recipe-content" class="hidden bg-white rounded-[2.5rem] shadow-2xl shadow-pink-100/50 border border-pink-50 overflow-hidden sticky top-8">
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const firebaseConfig = JSON.parse(__firebase_config);
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        
        let viewDate = new Date();
        let selectedDayInfo = null;
        let randomSeed = Date.now();

        const recipeDB = [
            { name: "ë§¤ì½¤ ì½©ë‚˜ë¬¼ ë¶ˆê³ ê¸°", type: "special", baseIng: ["ëŒ€íŒ¨ì‚¼ê²¹ì‚´", "ì½©ë‚˜ë¬¼", "ëŒ€íŒŒ", "ê³ ì¶”ì¥"], ratios: { "1": 200, "2": 400, "4": 800 }, steps: ["íŒ¬ ë°”ë‹¥ì— ì”»ì€ ì½©ë‚˜ë¬¼ì„ ë„‰ë„‰íˆ ê¹”ê³  ëŒ€íŒ¨ì‚¼ê²¹ì‚´ì„ ì˜¬ë¦½ë‹ˆë‹¤.", "ê³ ì¶”ì¥, ê³ ì¶§ê°€ë£¨, ê°„ì¥, ì„¤íƒ• 1:1:1:1 ë¹„ìœ¨ ì–‘ë…ì¥ì„ ë¼ì–¹ìŠµë‹ˆë‹¤.", "ì±„ìˆ˜ê°€ ë‚˜ì˜¬ ë•Œê¹Œì§€ ê°•ë¶ˆì—ì„œ ë“ì´ë‹¤ê°€ ê³ ê¸°ê°€ ìµìœ¼ë©´ ì„ìŠµë‹ˆë‹¤.", "ë§ˆì§€ë§‰ì— ëŒ€íŒŒë¥¼ ë„£ê³  ìˆ¨ì´ ì£½ì„ ë•Œê¹Œì§€ ë¹ ë¥´ê²Œ ë³¶ì•„ ë§ˆë¬´ë¦¬í•©ë‹ˆë‹¤."], tip: "ì½©ë‚˜ë¬¼ì—ì„œ ë¬¼ì´ ë§ì´ ë‚˜ì˜¤ë¯€ë¡œ ë”°ë¡œ ë¬¼ì„ ë„£ì§€ ë§ˆì„¸ìš”." },
            { name: "ê²¨ìš¸ ë¬´ ìƒì±„ ë¹„ë¹”ë°¥", type: "easy", baseIng: ["ë¬´", "ìª½íŒŒ", "ë‹¬ê±€", "ê³ ì¶§ê°€ë£¨"], ratios: { "1": 300, "2": 600, "4": 1200 }, steps: ["ë¬´ë¥¼ ì¼ì •í•œ êµµê¸°ë¡œ ì±„ ì°ì–´ ê³ ì¶§ê°€ë£¨ 2í°ìˆ ë¡œ ë¨¼ì € ìƒ‰ì„ ì…í™ë‹ˆë‹¤.", "ë©¸ì¹˜ì•¡ì “, ì‹ì´ˆ, ì„¤íƒ•, ë‹¤ì§„ ë§ˆëŠ˜ì„ ë„£ê³  ê³¨ê³ ë£¨ ë²„ë¬´ë¦½ë‹ˆë‹¤.", "ë°¥ ìœ„ì— ë¬´ìƒì±„ë¥¼ ë“¬ë¿ ì˜¬ë¦¬ê³  ë°˜ìˆ™ ë‹¬ê±€ í”„ë¼ì´ë¥¼ ì–¹ìŠµë‹ˆë‹¤.", "ì°¸ê¸°ë¦„ê³¼ ê¹¨ë¥¼ ë¿Œë ¤ ì•„ì‚­í•œ ì‹ê°ì„ ì‚´ë ¤ ë¹„ë²¼ ë¨¹ìŠµë‹ˆë‹¤."], tip: "ë¬´ë¥¼ ì†Œê¸ˆì— ì ˆì´ì§€ ì•Šì•„ì•¼ ë¬¼ì´ ëœ ìƒê¸°ê³  ì•„ì‚­í•©ë‹ˆë‹¤." },
            { name: "ì°¨ëŒë°•ì´ ë‹¬ë˜ ëœì¥ì°Œê°œ", type: "special", baseIng: ["ì°¨ëŒë°•ì´", "ë‹¬ë˜", "ë‘ë¶€", "ëœì¥"], ratios: { "1": 100, "2": 200, "4": 400 }, steps: ["ëƒ„ë¹„ì— ì°¨ëŒë°•ì´ë¥¼ ë¨¼ì € ë³¶ì•„ ê³ ì†Œí•œ ê¸°ë¦„ì„ ëƒ…ë‹ˆë‹¤.", "ìŒ€ëœ¨ë¬¼ì„ ë¶“ê³  ëœì¥ì„ í’€ì–´ í•œì†Œë” íŒ”íŒ” ë“ì—¬ì¤ë‹ˆë‹¤.", "ë‘ë¶€ì™€ ì• í˜¸ë°•, ê³ ì¶”ë¥¼ ë„£ê³  5ë¶„ ì •ë„ ë” ë“ì—¬ ë§›ì„ ëƒ…ë‹ˆë‹¤.", "ë¶ˆì„ ë„ê¸° 1ë¶„ ì „ ì†ì§ˆí•œ ë‹¬ë˜ë¥¼ ë„£ê³  ì‚´ì§ë§Œ ìµí˜€ í–¥ì„ ì‚´ë¦½ë‹ˆë‹¤."], tip: "ë‹¬ë˜ëŠ” ë„ˆë¬´ ì˜¤ë˜ ë“ì´ë©´ ì§ˆê²¨ì§€ë¯€ë¡œ ë§ˆì§€ë§‰ì— ë„£ìœ¼ì„¸ìš”." },
            { name: "ë°”ì‚­í•œ ì•Œë°°ê¸° ë°°ì¶”ì „", type: "easy", baseIng: ["ì•Œë°°ê¸° ë°°ì¶”", "ë¶€ì¹¨ê°€ë£¨", "í™ê³ ì¶”"], ratios: { "1": 5, "2": 10, "4": 20 }, steps: ["ë°°ì¶” ì¤„ê¸°ì˜ ë‘êº¼ìš´ ë¶€ë¶„ì„ ì¹¼ë“±ìœ¼ë¡œ ë‘ë“œë ¤ í‰í‰í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.", "ë¶€ì¹¨ê°€ë£¨ì™€ ì°¬ë¬¼ì„ 1:1 ë¹„ìœ¨ë¡œ ì„ì–´ ë¬½ì€ ë°˜ì£½ë¬¼ì„ ë§Œë“­ë‹ˆë‹¤.", "ë°°ì¶” ìì— ë°˜ì£½ì„ ì–‡ê²Œ ì…íŒ ë’¤ ë‹¬ê¶ˆì§„ íŒ¬ì— ì˜¬ë¦½ë‹ˆë‹¤.", "ì•ë’¤ë¡œ ë…¸ë¦‡í•˜ê³  ë°”ì‚­í•˜ê²Œ êµ¬ì›Œ ì´ˆê°„ì¥ì„ ê³ë“¤ì—¬ ëƒ…ë‹ˆë‹¤."], tip: "ë°˜ì£½ë¬¼ì— ì–¼ìŒì„ í•œ ì•Œ ë„£ìœ¼ë©´ í›¨ì”¬ ë°”ì‚­í•´ì§‘ë‹ˆë‹¤." },
            { name: "ë§¤ì½¤ ë‹­ë³¶ìŒíƒ•", type: "special", baseIng: ["í† ë§‰ë‹­", "ê°ì", "ì–‘íŒŒ", "ì²­ì–‘ê³ ì¶”"], ratios: { "1": 500, "2": 1000, "4": 1500 }, steps: ["ë‹­ì„ ë“ëŠ” ë¬¼ì— ë°ì³ ë¶ˆìˆœë¬¼ì„ ì œê±°í•˜ê³  ì°¬ë¬¼ì— í—¹êµ½ë‹ˆë‹¤.", "ëƒ„ë¹„ì— ë‹­ê³¼ ë¬¼, ê°„ì¥ ì–‘ë…ì¥ì„ ë„£ê³  ê°ìì™€ í•¨ê»˜ ë“ì…ë‹ˆë‹¤.", "êµ­ë¬¼ì´ ìì‘í•´ì§€ë©´ ì–‘íŒŒì™€ ëŒ€íŒŒë¥¼ ë„£ê³  ì¤‘ë¶ˆì—ì„œ ì¡¸ì…ë‹ˆë‹¤.", "ê°ìê°€ ì™„ì „íˆ ìµê³  êµ­ë¬¼ì´ ê±¸ì­‰í•´ì§€ë©´ ì™„ì„±ì…ë‹ˆë‹¤."], tip: "ì„¤íƒ•ì„ ë¨¼ì € ë„£ì–´ ê³ ê¸°ë¥¼ ì—°í•˜ê²Œ ë§Œë“œëŠ” ê²ƒì´ ë¹„ë²•ì…ë‹ˆë‹¤." },
            { name: "ë‹¬ì½¤ ì§­ì§¤ ì†Œê³ ê¸° ì¥ì¡°ë¦¼", type: "easy", baseIng: ["ì†Œê³ ê¸° ìš°ë‘”ì‚´", "ë©”ì¶”ë¦¬ì•Œ", "ê½ˆë¦¬ê³ ì¶”"], ratios: { "1": 200, "2": 400, "4": 800 }, steps: ["í•ë¬¼ì„ ëº€ ì†Œê³ ê¸°ë¥¼ ë©ì–´ë¦¬ì§¸ ì‚¶ì•„ë‚¸ ë’¤ ê²°ëŒ€ë¡œ ì°¢ìŠµë‹ˆë‹¤.", "ê°„ì¥, ë¬¼, ì„¤íƒ•ì„ ë„£ì€ ì¡°ë¦¼ì¥ì— ê³ ê¸°ë¥¼ ë„£ê³  ì¡¸ì…ë‹ˆë‹¤.", "ì‚¶ì€ ë©”ì¶”ë¦¬ì•Œì„ ë„£ê³  ìƒ‰ì´ ë°°ì–´ë“¤ ë•Œê¹Œì§€ ì¤‘ì•½ë¶ˆì—ì„œ ë“ì…ë‹ˆë‹¤.", "ë§ˆì§€ë§‰ì— ê½ˆë¦¬ê³ ì¶”ë¥¼ ë„£ì–´ í–¥ê¸‹í•¨ì„ ë”í•˜ê³  ë¶ˆì„ ë•ë‹ˆë‹¤."], tip: "ê³ ê¸°ë¥¼ ì‚¶ì€ ìœ¡ìˆ˜ë¥¼ ê±¸ëŸ¬ ì¡°ë¦¼ì¥ì— ì“°ë©´ í’ë¯¸ê°€ ê¹ŠìŠµë‹ˆë‹¤." },
            { name: "ë§¤ì½¤ ì–´ë¬µ ë³¶ìŒ", type: "easy", baseIng: ["ì‚¬ê°ì–´ë¬µ", "ì–‘íŒŒ", "ê³ ì¶§ê°€ë£¨", "ê°„ì¥"], ratios: { "1": 3, "2": 6, "4": 12 }, steps: ["ì–´ë¬µì„ í•œì… í¬ê¸°ë¡œ ì°ê³  ì–‘íŒŒëŠ” êµµê²Œ ì±„ ì¹ë‹ˆë‹¤.", "ì‹ìš©ìœ ë¥¼ ë‘ë¥¸ íŒ¬ì— ì–´ë¬µê³¼ ì–‘íŒŒë¥¼ ë„£ê³  ë…¸ë¦‡í•˜ê²Œ ë³¶ìŠµë‹ˆë‹¤.", "ê°„ì¥, ê³ ì¶§ê°€ë£¨, ì˜¬ë¦¬ê³ ë‹¹ì„ ë„£ì–´ ë¹ ë¥´ê²Œ ì–‘ë…ì„ ì…í™ë‹ˆë‹¤.", "ë¶ˆì„ ë„ê³  ì°¸ê¸°ë¦„ê³¼ í†µê¹¨ë¥¼ ë¿Œë ¤ ê³ ì†Œí•˜ê²Œ ë§ˆë¬´ë¦¬í•©ë‹ˆë‹¤."], tip: "ì–´ë¬µì„ ëœ¨ê±°ìš´ ë¬¼ì— ì‚´ì§ ë°ì³ ì‚¬ìš©í•˜ë©´ ê¸°ë¦„ê¸°ê°€ ì œê±°ë©ë‹ˆë‹¤." },
            { name: "ì†Œê³ ê¸° ë²„ì„¯ ì „ê³¨", type: "special", baseIng: ["ë¶ˆê³ ê¸°ìš© ê³ ê¸°", "í‘œê³ ë²„ì„¯", "íŒ½ì´ë²„ì„¯", "ë°°ì¶”"], ratios: { "1": 150, "2": 300, "4": 600 }, steps: ["ë°°ì¶”ì™€ ë²„ì„¯ë“¤ì„ ëƒ„ë¹„ ë°”ë‹¥ì— ê°€ì§€ëŸ°íˆ ë‘˜ëŸ¬ ë‹´ìŠµë‹ˆë‹¤.", "ê°€ìš´ë°ì— ì–‘ë…í•œ ì†Œê³ ê¸°ë¥¼ ì˜¬ë¦¬ê³  ë©¸ì¹˜ ìœ¡ìˆ˜ë¥¼ ë¶“ìŠµë‹ˆë‹¤.", "ë³´ê¸€ë³´ê¸€ ë“ì–´ì˜¤ë¥´ë©´ ê±°í’ˆì„ ê±·ì–´ë‚´ë©° ê¹”ë”í•˜ê²Œ ìµí™ë‹ˆë‹¤.", "ì±„ì†Œì™€ ê³ ê¸°ê°€ ìµìœ¼ë©´ í°ì¦ˆ ì†ŒìŠ¤ì— ì°ì–´ ë‹´ë°±í•˜ê²Œ ì¦ê¹ë‹ˆë‹¤."], tip: "ë‹¤ì–‘í•œ ë²„ì„¯ì„ ë„£ì„ìˆ˜ë¡ êµ­ë¬¼ ë§›ì´ ì‹œì›í•´ì§‘ë‹ˆë‹¤." },
            { name: "ë§¤ì½¤ ê°ì ì¡°ë¦¼", type: "easy", baseIng: ["ê°ì", "ê³ ì¶§ê°€ë£¨", "ë‹¤ì§„ ë§ˆëŠ˜"], ratios: { "1": 2, "2": 4, "4": 8 }, steps: ["ê°ìë¥¼ ê¹ë‘‘ì°ê¸°í•˜ì—¬ ì°¬ë¬¼ì— ë‹´ê°€ ì „ë¶„ê¸°ë¥¼ ì œê±°í•©ë‹ˆë‹¤.", "íŒ¬ì— ì‹ìš©ìœ ë¥¼ ë‘ë¥´ê³  ê°ìë¥¼ ë¨¼ì € ë³¶ì•„ ì½”íŒ…í•©ë‹ˆë‹¤.", "ë¬¼, ê°„ì¥, ì„¤íƒ•, ê³ ì¶§ê°€ë£¨ë¥¼ ë„£ê³  ëšœê»‘ì„ ë®ì–´ ìµí™ë‹ˆë‹¤.", "êµ­ë¬¼ì´ ì¡¸ì•„ë“¤ë©´ ê¿€ì„ í•œ í°ìˆ  ë„£ì–´ ìœ¤ê¸°ë¥¼ ëƒ…ë‹ˆë‹¤."], tip: "ê°ìë¥¼ ë³¶ì€ ë’¤ ì¡¸ì—¬ì•¼ ëª¨ì–‘ì´ ë¶€ì„œì§€ì§€ ì•ŠìŠµë‹ˆë‹¤." }
        ];

        onAuthStateChanged(auth, (user) => {
            if (!user) signInAnonymously(auth);
            renderCalendar();
        });

        window.refreshSeedAndRender = function() {
            randomSeed = Math.random();
            selectedDayInfo = null;
            document.getElementById('recipe-content').classList.add('hidden');
            document.getElementById('recipe-content-placeholder').classList.remove('hidden');
            renderCalendar();
        };

        window.renderCalendar = function() {
            const container = document.getElementById('calendar-body');
            container.innerHTML = '';
            
            const year = viewDate.getFullYear();
            const month = viewDate.getMonth();
            document.getElementById('calendar-title').innerText = `${month + 1}ì›” ìš”ë¦¬ ì¼ê¸°`;

            const lastDate = new Date(year, month + 1, 0).getDate();
            const firstDay = new Date(year, month, 1).getDay();

            for (let i = 0; i < firstDay; i++) {
                container.appendChild(document.createElement('div')).className = 'min-h-[110px] bg-pink-50/30 rounded-3xl opacity-30';
            }

            for (let i = 1; i <= lastDate; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day rounded-3xl flex flex-col items-start';
                day.dataset.day = i;
                if (new Date().getDate() === i && new Date().getMonth() === month) day.classList.add('today');

                const index = (Math.floor(Math.abs(Math.sin(i + randomSeed) * 10000))) % recipeDB.length;
                const menu = recipeDB[index];
                
                day.innerHTML = `<span class="text-sm font-black text-pink-200">${i}</span><div class="menu-label">${menu.name}</div>`;
                day.onclick = () => {
                    selectedDayInfo = { day: i, menu: menu };
                    showRecipe(menu, day);
                };
                container.appendChild(day);
            }
        };

        function showRecipe(menu, target) {
            document.querySelectorAll('.calendar-day').forEach(el => el.classList.remove('active'));
            if (target && target.classList) target.classList.add('active');

            const person = document.getElementById('person-option').value;
            const content = document.getElementById('recipe-content');
            document.getElementById('recipe-content-placeholder').classList.add('hidden');
            content.classList.remove('hidden');

            const amount = menu.ratios[person];
            const unit = menu.name.includes("ë°°ì¶”ì „") || menu.name.includes("ì–´ë¬µ") || menu.name.includes("ê°ì") ? "ê°œ/ì¥" : "g";

            content.innerHTML = `
                <div class="p-10">
                    <h3 class="text-3xl font-black mb-6 text-gray-900 leading-tight">${menu.name}</h3>
                    <div class="bg-rose-50/50 p-6 rounded-[2rem] mb-8 border border-rose-100">
                        <p class="text-xs font-bold text-rose-300 mb-2 uppercase tracking-widest">ì¥ë³´ê¸° ëª©ë¡ (${person}ì¸ë¶„)</p>
                        <p class="text-xl font-black text-rose-600">${menu.baseIng[0]} <span class="text-rose-400 font-medium text-lg">${amount}${unit}</span></p>
                        <p class="text-sm text-rose-400 mt-2 font-medium">ê¸°íƒ€: ${menu.baseIng.slice(1).join(', ')}</p>
                    </div>
                    <div class="space-y-6">
                        <p class="text-[10px] font-black text-gray-300 uppercase tracking-[0.3em] mb-2">ìš”ë¦¬ ìˆœì„œ</p>
                        ${menu.steps.map((s, i) => `
                            <div class="flex gap-4">
                                <span class="flex-shrink-0 w-6 h-6 bg-pink-500 text-white rounded-xl flex items-center justify-center text-xs font-black shadow-md shadow-pink-100">${i+1}</span>
                                <p class="text-[15px] text-gray-600 font-medium leading-[1.8]">${s}</p>
                            </div>
                        `).join('')}
                    </div>
                    <div class="mt-10 p-5 bg-amber-50 border-l-4 border-amber-300 rounded-r-3xl">
                        <p class="text-xs text-amber-800 leading-relaxed font-bold">ğŸ’¡ ì‹¤íŒ¨ ì—†ëŠ” ë¹„ê²°: ${menu.tip}</p>
                    </div>
                </div>
            `;
        }

        document.getElementById('prev-month').onclick = () => { viewDate.setMonth(viewDate.getMonth() - 1); selectedDayInfo = null; renderCalendar(); };
        document.getElementById('next-month').onclick = () => { viewDate.setMonth(viewDate.getMonth() + 1); selectedDayInfo = null; renderCalendar(); };

        window.updateRecipeIfSelected = () => { 
            if (selectedDayInfo) {
                const activeEl = document.querySelector('.calendar-day.active') || document.querySelector(`.calendar-day[data-day="${selectedDayInfo.day}"]`);
                showRecipe(selectedDayInfo.menu, activeEl); 
            }
        };
    </script>
</body>
</html>